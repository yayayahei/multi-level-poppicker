{"version":3,"sources":["index.js","ulpicker.js","components/Class.js","components/constants.js","components/createMask.js","components/dom.js","components/events.js","components/util.js"],"names":["panelBuffer","titleBuffer","pickerBuffer","MultiLevelPopPicker","Class","extend","init","options","self","panelTitle","panel","document","body","appendChild","headerText","querySelector","innerText","close","title","mask","addEventListener","event","hide","_createPicker","constants","EVENT_START","preventDefault","EVENT_MOVE","layer","titleWidthLayer","defaultTitles","Array","fill","width","pickers","titles","pickerElements","i","pickerElement","setAttribute","style","titleElement","classList","add","id","Number","getAttribute","index","prevIndex","previousSibling","_id","bscroll","refresh","scrollToElement","remove","push","picker","eventData","detail","preItem","item","thisTitleElement","text","nextPickerElement","nextSibling","ulpicker","setItems","children","setSelectedIndex","callback","rs","getSelectedItems","setData","data","items","getSelectedItem","show","documentElement","disposed","dispose","setTimeout","parentNode","removeChild","name","MAX_EXCEED","VISIBLE_RANGE","DEFAULT_ITEM_HEIGHT","BLUR_WIDTH","rad2deg","rad","Math","PI","deg2rad","deg","platform","navigator","toLowerCase","userAgent","isIos","indexOf","ULPicker","holder","BScroll","bindToWrapper","initInertiaParams","calcElementItemPostion","bindEvent","prototype","findElementItems","elementItems","slice","call","querySelectorAll","list","height","offsetHeight","r","d","itemHeight","length","itemAngle","parseInt","calcAngle","hightlightRange","visibleRange","beginAngle","beginExceed","andGenerateItms","forEach","endAngle","dataItem","innerHTML","value","endExceed","c","a","b","parseFloat","abs","intDeg","cosC","angleC","acos","calcElementItemVisibility","angle","difference","setAngle","webkitTransform","lastAngle","startY","isPicking","EVENT_END","EVENT_CANCEL","elementItem","target","tagName","parentElement","lastMoveTime","lastMoveStart","stopInertiaMove","updateInertiaParams","isStart","point","changedTouches","pageY","timeStamp","Date","now","startAngle","nowTime","startInertiaScroll","v","dir","deceleration","duration","dist","scrollTop","distAngle","srcDistAngle","endScroll","scrollDistAngle","frameInterval","stepCount","stepIndex","inertiaMove","newAngle","quartEaseOut","t","webkitTransition","toFixed","triggerChange","force","getSelectedIndex","events","trigger","lastIndex","correctAngle","buffer","undefined","join","getItems","getSelectedValue","getSelectedText","setSelectedValue","uls","each","element","optionsText","_options","JSON","parse","prop","_super","initializing","fnTest","test","fn","tmp","ret","apply","arguments","constructor","callee","CLASS_POPOVER","CLASS_POPOVER_ARROW","CLASS_ACTION_POPOVER","CLASS_BACKDROP","CLASS_BAR_POPOVER","CLASS_BAR_BACKDROP","CLASS_ACTION_BACKDROP","CLASS_ACTIVE","CLASS_BOTTOM","isTouchable","window","EVENT_CLICK","createMask","createElement","consts","_show","_remove","utils","later","dom","str","__create_dom_div__","childNodes","e","eventType","dispatchEvent","CustomEvent","bubbles","cancelable","isArray","object","when","context","m","f","cancel","clearTimeout"],"mappings":"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","file":"all.js","sourcesContent":["/**\r\n * 弹出选择列表插件\r\n * 此组件依赖 listpcker ，请在页面中先引入 mui.picker.css + mui.picker.js\r\n * varstion 1.0.0\r\n * by yayayahei\r\n * mmwcbz@msn.cn\r\n */\r\n\r\nimport dom from './components/dom';\r\nimport Class from './components/Class';\r\nimport createMask from './components/createMask';\r\nimport * as constants from './components/constants';\r\nimport ulpicker from './ulpicker';\r\nvar panelBuffer = '<div class=\"mui-poppicker\">\\\r\n\t\t<div class=\"mui-poppicker-header\">\\\r\n\t\t    <span class=\"mui-poppicker-header-text\"></span>\\\r\n\t\t   <div class=\"mui-poppicker-btn-close\"><span class=\" icon fa fa-times \" style=\"font-size: 16px;\"></span></div>\\\r\n\t\t</div>\\\r\n\t\t<div class=\"mui-poppicker-body\">\\\r\n\t\t<div class=\"mui-poppicker-nav\">\\\r\n\t\t<div class=\"mui-poppicker-title\"></div>\\\r\n\t\t</div>\\\r\n\t\t</div>\\\r\n\t</div>';\r\nvar titleBuffer = '<h5 data-id=\"title\"></h5>';\r\nvar pickerBuffer = '<div class=\"mui-ulpicker\">\\\r\n\t\t<div class=\"mui-ulpicker-inner\">\\\r\n            <div class=\"wrapper\">\\\r\n                <ul class=\"content mui-ulpicker-list\">\\\r\n                </ul>\\\r\n            </div>\\\r\n        </div>\\\r\n\t</div>';\r\n\r\n//定义弹出选择器类\r\nvar MultiLevelPopPicker = Class.extend({\r\n    //构造函数\r\n    init: function (options) {\r\n        var self = this;\r\n        self.options = options || {};\r\n        self.options.panelTitle = self.options.panelTitle || '';\r\n        self.panel = dom(panelBuffer)[0];\r\n        document.body.appendChild(self.panel);\r\n        self.headerText = self.panel.querySelector('.mui-poppicker-header-text');\r\n        self.headerText.innerText = self.options.panelTitle;\r\n\r\n        self.close = self.panel.querySelector('.mui-poppicker-btn-close');\r\n        self.title = self.panel.querySelector('.mui-poppicker-title');\r\n        self.body = self.panel.querySelector('.mui-poppicker-body');\r\n        self.mask = createMask();\r\n        self.close.addEventListener('tap', function (event) {\r\n            self.hide();\r\n        }, false);\r\n        self.mask[0].addEventListener('tap', function () {\r\n            self.hide();\r\n        }, false);\r\n        self._createPicker();\r\n        //防止滚动穿透\r\n        self.panel.addEventListener(constants.EVENT_START, function (event) {\r\n            event.preventDefault();\r\n        }, false);\r\n        self.panel.addEventListener(constants.EVENT_MOVE, function (event) {\r\n            event.preventDefault();\r\n        }, false);\r\n    },\r\n    _createPicker: function () {\r\n        var self = this;\r\n        var layer = self.options.layer || 1;\r\n        var titleWidthLayer = self.options.titleWidthLayer;\r\n        var defaultTitles = self.options.defaultTitles || Array(layer).fill('请选择');\r\n        var width = '100%';\r\n        self.pickers = [];\r\n        self.titles = [];\r\n        self.pickerElements = [];\r\n        for (var i = 1; i <= layer; i++) {\r\n            var pickerElement = dom(pickerBuffer)[0];\r\n            pickerElement.setAttribute(\"data-id\", i);\r\n            pickerElement.style.width = width;\r\n            // append title\r\n            var titleElement = dom(titleBuffer)[0];\r\n            titleElement.innerText = defaultTitles[i - 1];\r\n            titleElement.setAttribute(\"data-id\", i);\r\n            if (titleWidthLayer) {\r\n                titleElement.style.width = titleWidthLayer[i - 1] + '%';\r\n            }\r\n            if (i === 1) {\r\n                titleElement.classList.add('active');\r\n                pickerElement.classList.add('active');\r\n            }\r\n            titleElement.addEventListener('tap', function (event) {\r\n                var id = Number(this.getAttribute(\"data-id\"));\r\n                var index = Number(this.getAttribute(\"data-value\"));\r\n                var prevIndex = this.previousSibling && Number(this.previousSibling.getAttribute(\"data-value\"));\r\n                // console.log(prevIndex);\r\n                for (var _id = 0; _id < layer; _id++) {\r\n                    if (_id + 1 === id) {\r\n                        // active this title\r\n                        self.pickerElements[_id].classList.add('active');\r\n                        self.pickers[_id].bscroll.refresh();\r\n                        self.pickers[_id].bscroll.scrollToElement('.choose');\r\n                        // display corresponding picker,\r\n                        self.titles[_id].classList.add('active');\r\n\r\n                    } else {\r\n                        // deactive other picker\r\n                        self.pickerElements[_id].classList.remove('active');\r\n                        // deactive other title\r\n                        self.titles[_id].classList.remove('active');\r\n\r\n                    }\r\n                }\r\n                // if (id > 1) {\r\n                //     self.pickers[id - 1].triggerChange();\r\n                // }\r\n            }, false);\r\n            self.title.appendChild(titleElement);\r\n            self.titles.push(titleElement);\r\n            self.pickerElements.push(pickerElement);\r\n            self.body.appendChild(pickerElement);\r\n            var picker =  ulpicker(pickerElement);\r\n            self.pickers.push(picker);\r\n            pickerElement.addEventListener('change', function (event) {\r\n                // console.log('change event',event);\r\n                var id = Number(this.getAttribute(\"data-id\"));\r\n                var eventData = event.detail || {};\r\n                var preItem = eventData.item || {};\r\n                // console.log('choosed item:', event.detail.item,event);\r\n\r\n                var thisTitleElement = self.titles[id - 1];\r\n                thisTitleElement.innerText = preItem.text || defaultTitles[id - 1];\r\n                thisTitleElement.setAttribute('data-value', eventData.index);\r\n                var nextPickerElement = this.nextSibling;\r\n                if (nextPickerElement && nextPickerElement.ulpicker) {\r\n                    nextPickerElement.ulpicker.setItems(preItem.children);\r\n                    nextPickerElement.ulpicker.setSelectedIndex(-1);\r\n                    // show next picker\r\n                    if (eventData.index > -1) {\r\n                        for (var _id = 0; _id < layer; _id++) {\r\n                            if (_id === id) {\r\n                                // active this title\r\n                                self.pickerElements[_id].classList.add('active');\r\n                                // display corresponding picker,\r\n                                self.titles[_id].classList.add('active');\r\n                                self.pickers[_id].bscroll.refresh();\r\n                            } else {\r\n                                // deactive other picker\r\n                                self.pickerElements[_id].classList.remove('active');\r\n                                // deactive other title\r\n                                self.titles[_id].classList.remove('active');\r\n\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                } else if (eventData.index > -1) {\r\n                    // 点击最后一级\r\n                    if (self.callback) {\r\n                        var rs = self.callback(self.getSelectedItems());\r\n                        if (rs !== false) {\r\n                            self.hide();\r\n                        }\r\n                    }\r\n                }\r\n            }, false);\r\n        }\r\n    },\r\n    //填充数据\r\n    setData: function (data) {\r\n        var self = this;\r\n        data = data || [];\r\n        self.pickers[0].setItems(data);\r\n    },\r\n    //获取选中的项（数组）\r\n    getSelectedItems: function () {\r\n        var self = this;\r\n        var items = [];\r\n        for (var i in self.pickers) {\r\n            var picker = self.pickers[i];\r\n            items.push(picker.getSelectedItem() || {});\r\n        }\r\n        return items;\r\n    },\r\n\r\n    //显示\r\n    show: function (callback) {\r\n        var self = this;\r\n        self.callback = callback;\r\n        self.mask.show();\r\n        document.body.classList.add('poppicker-active-for-page');\r\n        document.documentElement.classList.add('poppicker-active-for-page');\r\n        self.panel.classList.add('active');\r\n\r\n    },\r\n\r\n    //隐藏\r\n    hide: function () {\r\n        var self = this;\r\n        if (self.disposed) return;\r\n        self.panel.classList.remove('active');\r\n        self.mask.close();\r\n        document.body.classList.remove('poppicker-active-for-page');\r\n        document.documentElement.classList.remove('poppicker-active-for-page');\r\n    },\r\n    dispose: function () {\r\n        var self = this;\r\n        self.hide();\r\n        setTimeout(function () {\r\n            self.panel.parentNode.removeChild(self.panel);\r\n            for (var name in self) {\r\n                self[name] = null;\r\n                delete self[name];\r\n            }\r\n            self.disposed = true;\r\n        }, 300);\r\n    }\r\n});\r\n\r\nexport default MultiLevelPopPicker;\r\n","import * as constants from './components/constants';\r\nimport * as util from './components/util';\r\nimport * as events from './components/events';\r\n/**\r\n * 选择列表插件\r\n * varstion 1.0.0\r\n * by yayayahei\r\n * mmwcbz@msn.cn\r\n */\r\nvar MAX_EXCEED = 30;\r\n    var VISIBLE_RANGE = 90;\r\n    var DEFAULT_ITEM_HEIGHT = 40;\r\n    var BLUR_WIDTH = 10;\r\n\r\n    var rad2deg =function (rad) {\r\n        return rad / (Math.PI / 180);\r\n    };\r\n\r\n    var deg2rad  = function (deg) {\r\n        return deg * (Math.PI / 180);\r\n    };\r\n\r\n    var platform = navigator.platform.toLowerCase();\r\n    var userAgent = navigator.userAgent.toLowerCase();\r\n    var isIos = (userAgent.indexOf('iphone') > -1 ||\r\n        userAgent.indexOf('ipad') > -1 ||\r\n        userAgent.indexOf('ipod') > -1) &&\r\n        (platform.indexOf('iphone') > -1 ||\r\n            platform.indexOf('ipad') > -1 ||\r\n            platform.indexOf('ipod') > -1);\r\n    //alert(isIos);\r\n\r\n    var ULPicker = function (holder, options) {\r\n        var self = this;\r\n        self.holder = holder;\r\n        self.options = options || {};\r\n        self.bscroll = new BScroll(self.holder.querySelector('.wrapper'), {\r\n            bindToWrapper: true,\r\n            // click: true,\r\n            // tap: true,\r\n        });\r\n        self.init();\r\n        self.initInertiaParams();\r\n        self.calcElementItemPostion(true);\r\n        self.bindEvent();\r\n    };\r\n\r\n    ULPicker.prototype.findElementItems = function () {\r\n        var self = this;\r\n        self.elementItems = [].slice.call(self.holder.querySelectorAll('li'));\r\n        return self.elementItems;\r\n    };\r\n\r\n    ULPicker.prototype.init = function () {\r\n        var self = this;\r\n        self.list = self.holder.querySelector('ul');\r\n        self.findElementItems();\r\n        self.height = self.holder.offsetHeight;\r\n        self.r = self.height / 2 - BLUR_WIDTH;\r\n        self.d = self.r * 2;\r\n        self.itemHeight = self.elementItems.length > 0 ? self.elementItems[0].offsetHeight : DEFAULT_ITEM_HEIGHT;\r\n        self.itemAngle = parseInt(self.calcAngle(self.itemHeight * 0.8));\r\n        self.hightlightRange = self.itemAngle / 2;\r\n        self.visibleRange = VISIBLE_RANGE;\r\n        self.beginAngle = 0;\r\n        self.beginExceed = self.beginAngle - MAX_EXCEED;\r\n        // self.list.angle = self.beginAngle;\r\n        // if (isIos) {\r\n        //     self.list.style.webkitTransformOrigin = \"center center \" + self.r + \"px\";\r\n        // }\r\n    };\r\n\r\n    ULPicker.prototype.calcElementItemPostion = function (andGenerateItms) {\r\n        var self = this;\r\n        if (andGenerateItms) {\r\n            self.items = [];\r\n        }\r\n        self.elementItems.forEach(function (item) {\r\n            var index = self.elementItems.indexOf(item);\r\n            self.endAngle = self.itemAngle * index;\r\n            // item.angle = self.endAngle;\r\n            // item.style.webkitTransformOrigin = \"center center -\" + self.r + \"px\";\r\n            // item.style.webkitTransform = \"translateZ(\" + self.r + \"px) rotateX(\" + (-self.endAngle) + \"deg)\";\r\n            if (andGenerateItms) {\r\n                var dataItem = {};\r\n                dataItem.text = item.innerHTML || '';\r\n                dataItem.value = item.getAttribute('data-value') || dataItem.text;\r\n                self.items.push(dataItem);\r\n            }\r\n        });\r\n        self.endExceed = self.endAngle + MAX_EXCEED;\r\n        // self.calcElementItemVisibility(self.beginAngle);\r\n    };\r\n\r\n    ULPicker.prototype.calcAngle = function (c) {\r\n        var self = this;\r\n        var a = b = parseFloat(self.r);\r\n        //直径的整倍数部分直接乘以 180\r\n        c = Math.abs(c); //只算角度不关心正否值\r\n        var intDeg = parseInt(c / self.d) * 180;\r\n        c = c % self.d;\r\n        //余弦\r\n        var cosC = (a * a + b * b - c * c) / (2 * a * b);\r\n        var angleC = intDeg + rad2deg(Math.acos(cosC));\r\n        return angleC;\r\n    };\r\n\r\n    ULPicker.prototype.calcElementItemVisibility = function (angle) {\r\n        var self = this;\r\n        self.elementItems.forEach(function (item) {\r\n            var difference = Math.abs(item.angle - angle);\r\n            if (difference < self.hightlightRange) {\r\n                item.classList.add('highlight');\r\n            } else if (difference < self.visibleRange) {\r\n                item.classList.add('visible');\r\n                item.classList.remove('highlight');\r\n            } else {\r\n                item.classList.remove('highlight');\r\n                item.classList.remove('visible');\r\n            }\r\n        });\r\n    };\r\n\r\n    ULPicker.prototype.setAngle = function (angle) {\r\n        var self = this;\r\n        self.list.angle = angle;\r\n        self.list.style.webkitTransform = \"perspective(1000px) rotateY(0deg) rotateX(\" + angle + \"deg)\";\r\n        self.calcElementItemVisibility(angle);\r\n    };\r\n\r\n    ULPicker.prototype.bindEvent = function () {\r\n        var self = this;\r\n        var lastAngle = 0;\r\n        var startY = null;\r\n        var isPicking = false;\r\n        self.holder.addEventListener(constants.EVENT_START, function (event) {\r\n            // event.stopImmediatePropagation();\r\n// console.log($.EVENT_START,event);\r\n            // isPicking = true;\r\n            // event.preventDefault();\r\n            // self.list.style.webkitTransition = '';\r\n            // startY = (event.changedTouches ? event.changedTouches[0] : event).pageY;\r\n            // lastAngle = self.list.angle;\r\n            // self.updateInertiaParams(event, true);\r\n        }, false);\r\n        self.holder.addEventListener(constants.EVENT_END, function (event) {\r\n            // event.stopImmediatePropagation();\r\n// console.log($.EVENT_END,event);\r\n            // isPicking = false;\r\n            // event.preventDefault();\r\n            // self.startInertiaScroll(event);\r\n        }, false);\r\n        self.holder.addEventListener(constants.EVENT_CANCEL, function (event) {\r\n            // event.stopImmediatePropagation();\r\n// console.log($.EVENT_CANCEL,event);\r\n            // isPicking = false;\r\n            // event.preventDefault();\r\n            // self.startInertiaScroll(event);\r\n        }, false);\r\n        self.holder.addEventListener(constants.EVENT_MOVE, function (event) {\r\n            // console.log($.EVENT_MOVE, event);\r\n            // return true;\r\n            // event.stopImmediatePropagation();\r\n            // if (!isPicking) {\r\n            //     return;\r\n            // }\r\n            // console.log(self.list.scrollTop,self.list.scrollHeight,self.list.offsetHeight);\r\n\r\n            // var endY = (event.changedTouches ? event.changedTouches[0] : event).pageY;\r\n            // var dragRange = endY - startY;\r\n            // if(self.list.scrollTop===0&&dragRange>0){\r\n            //     console.log('prevent default');\r\n            //     event.preventDefault();\r\n            // }else if (self.list.scrollTop!==0&&self.list.scrollTop===self.list.scrollHeight-self.list.offsetHeight&&dragRange<0){\r\n            //     console.log('prevent default');\r\n            //     event.preventDefault();\r\n            // }\r\n            // event.preventDefault();\r\n\r\n            // console.log(endY,  self.lastMoveStart);\r\n            // self.list.scrollTop-=endY - self.lastMoveStart;\r\n            //\r\n            // var dragAngle = self.calcAngle(dragRange);\r\n            //\r\n            // var newAngle = dragRange > 0 ? lastAngle - dragAngle : lastAngle + dragAngle;\r\n            // if (newAngle > self.endExceed) {\r\n            //     newAngle = self.endExceed\r\n            // }\r\n            // if (newAngle < self.beginExceed) {\r\n            //     newAngle = self.beginExceed\r\n            // }\r\n            // self.setAngle(newAngle);\r\n            // self.updateInertiaParams(event);\r\n        }, false);\r\n        // --\r\n        self.list.addEventListener('tap', function (event) {\r\n            // console.log(event);\r\n\r\n            // alert(event.target.tagName + ',' + event.target.parentElement.tagName);\r\n\r\n            // alert(event.path[0].tagName)\r\n            // alert(event.target.tagName);\r\n            // alert(event.path.length);\r\n            // alert(event.path[1].tagName);\r\n            var elementItem = event.target.tagName === 'LI' ? event.target : event.target.parentElement;\r\n\r\n            // alert(elementItem);\r\n            // alert('tap');\r\n            if (elementItem) {\r\n                self.elementItems.forEach(\r\n                    function (value) {\r\n                        value.classList.remove('choose');\r\n                    }\r\n                );\r\n                elementItem.classList.add('choose');\r\n                var index = self.elementItems.indexOf(elementItem);\r\n                // alert(index);\r\n                self.setSelectedIndex(index, 200);\r\n            }\r\n        }, false);\r\n    };\r\n\r\n    ULPicker.prototype.initInertiaParams = function () {\r\n        var self = this;\r\n        self.lastMoveTime = 0;\r\n        self.lastMoveStart = 0;\r\n        self.stopInertiaMove = false;\r\n    };\r\n\r\n    ULPicker.prototype.updateInertiaParams = function (event, isStart) {\r\n        var self = this;\r\n        var point = event.changedTouches ? event.changedTouches[0] : event;\r\n        if (isStart) {\r\n            self.lastMoveStart = point.pageY;\r\n            self.lastMoveTime = event.timeStamp || Date.now();\r\n            self.startAngle = self.list.angle;\r\n        } else {\r\n            var nowTime = event.timeStamp || Date.now();\r\n            // if (nowTime - self.lastMoveTime > 300) {\r\n            self.lastMoveTime = nowTime;\r\n            self.lastMoveStart = point.pageY;\r\n            // }\r\n        }\r\n        self.stopInertiaMove = true;\r\n    };\r\n\r\n    ULPicker.prototype.startInertiaScroll = function (event) {\r\n        var self = this;\r\n        var point = event.changedTouches ? event.changedTouches[0] : event;\r\n        /**\r\n         * 缓动代码\r\n         */\r\n        var nowTime = event.timeStamp || Date.now();\r\n        var v = (point.pageY - self.lastMoveStart) / (nowTime - self.lastMoveTime); //最后一段时间手指划动速度\r\n        var dir = v > 0 ? -1 : 1; //加速度方向\r\n        var deceleration = dir * 0.2 * -1;\r\n        var duration = Math.abs(v / deceleration); // 速度消减至0所需时间\r\n        var dist = v * duration / 2; //最终移动多少\r\n        self.list.scrollTop -= dist;\r\n\r\n        var startAngle = self.list.angle;\r\n        var distAngle = self.calcAngle(dist) * dir;\r\n        //----\r\n        var srcDistAngle = distAngle;\r\n        if (startAngle + distAngle < self.beginExceed) {\r\n            distAngle = self.beginExceed - startAngle;\r\n            duration = duration * (distAngle / srcDistAngle) * 0.6;\r\n        }\r\n        if (startAngle + distAngle > self.endExceed) {\r\n            distAngle = self.endExceed - startAngle;\r\n            duration = duration * (distAngle / srcDistAngle) * 0.6;\r\n        }\r\n        //----\r\n        if (distAngle == 0) {\r\n            self.endScroll();\r\n            return;\r\n        }\r\n        self.scrollDistAngle(nowTime, startAngle, distAngle, duration);\r\n    };\r\n    ULPicker.prototype.scrollDistAngle = function (nowTime, startAngle, distAngle, duration) {\r\n        var self = this;\r\n        self.stopInertiaMove = false;\r\n        (function (nowTime, startAngle, distAngle, duration) {\r\n            var frameInterval = 13;\r\n            var stepCount = duration / frameInterval;\r\n            var stepIndex = 0;\r\n            (function inertiaMove() {\r\n                if (self.stopInertiaMove) return;\r\n                var newAngle = self.quartEaseOut(stepIndex, startAngle, distAngle, stepCount);\r\n                self.setAngle(newAngle);\r\n                stepIndex++;\r\n                if (stepIndex > stepCount - 1 || newAngle < self.beginExceed || newAngle > self.endExceed) {\r\n                    self.endScroll();\r\n                    return;\r\n                }\r\n                setTimeout(inertiaMove, frameInterval);\r\n            })();\r\n        })(nowTime, startAngle, distAngle, duration);\r\n    };\r\n\r\n\r\n    ULPicker.prototype.quartEaseOut = function (t, b, c, d) {\r\n        return -c * ((t = t / d - 1) * t * t * t - 1) + b;\r\n    };\r\n\r\n    ULPicker.prototype.endScroll = function () {\r\n        var self = this;\r\n        if (self.list.angle < self.beginAngle) {\r\n            self.list.style.webkitTransition = \"150ms ease-out\";\r\n            self.setAngle(self.beginAngle);\r\n        } else if (self.list.angle > self.endAngle) {\r\n            self.list.style.webkitTransition = \"150ms ease-out\";\r\n            self.setAngle(self.endAngle);\r\n        } else {\r\n            var index = parseInt((self.list.angle / self.itemAngle).toFixed(0));\r\n            self.list.style.webkitTransition = \"100ms ease-out\";\r\n            self.setAngle(self.itemAngle * index);\r\n        }\r\n        self.triggerChange();\r\n    };\r\n\r\n    ULPicker.prototype.triggerChange = function (force) {\r\n        // console.log('trigger change');\r\n        var self = this;\r\n        setTimeout(function () {\r\n            var index = self.getSelectedIndex();\r\n            // console.log(index);\r\n            var item = self.items[index];\r\n            // console.log(item);\r\n            // if ($.trigger && (index != self.lastIndex || force === true)) {\r\n            if (events.trigger || force === true) {\r\n                events.trigger(self.holder, 'change', {\r\n                    \"index\": index,\r\n                    \"item\": item\r\n                });\r\n                //console.log('change:' + index);\r\n            }\r\n            self.lastIndex = index;\r\n            typeof force === 'function' && force();\r\n        }, 0);\r\n    };\r\n\r\n    ULPicker.prototype.correctAngle = function (angle) {\r\n        var self = this;\r\n        if (angle < self.beginAngle) {\r\n            return self.beginAngle;\r\n        } else if (angle > self.endAngle) {\r\n            return self.endAngle;\r\n        } else {\r\n            return angle;\r\n        }\r\n    };\r\n\r\n    ULPicker.prototype.setItems = function (items) {\r\n        var self = this;\r\n        self.items = items || [];\r\n        var buffer = [];\r\n        self.items.forEach(function (item) {\r\n            if (item !== null && item !== undefined) {\r\n                buffer.push('<li><span>' + (item.text || item) + '</span><i></i></li>');\r\n            }\r\n        });\r\n        self.list.innerHTML = buffer.join('');\r\n        self.findElementItems();\r\n        self.calcElementItemPostion();\r\n        self.setAngle(self.correctAngle(self.list.angle));\r\n        self.triggerChange(true);\r\n    };\r\n\r\n    ULPicker.prototype.getItems = function () {\r\n        var self = this;\r\n        return self.items;\r\n    };\r\n\r\n    ULPicker.prototype.getSelectedIndex = function () {\r\n        var self = this;\r\n        return self.index;\r\n    };\r\n\r\n    ULPicker.prototype.setSelectedIndex = function (index, duration, callback) {\r\n        // console.log('setSelectIndex');\r\n        var self = this;\r\n        self.index = index;\r\n        // console.log(self.index);\r\n        // self.list.style.webkitTransition = '';\r\n        // var angle = self.correctAngle(self.itemAngle * index);\r\n        // if (duration && duration > 0) {\r\n        //     var distAngle = angle - self.list.angle;\r\n        //     self.scrollDistAngle(Date.now(), self.list.angle, distAngle, duration);\r\n        // } else {\r\n        //     self.setAngle(angle);\r\n        // }\r\n        self.triggerChange(callback);\r\n    };\r\n\r\n    ULPicker.prototype.getSelectedItem = function () {\r\n        var self = this;\r\n        return self.items[self.getSelectedIndex()];\r\n    };\r\n\r\n    ULPicker.prototype.getSelectedValue = function () {\r\n        var self = this;\r\n        return (self.items[self.getSelectedIndex()] || {}).value;\r\n    };\r\n\r\n    ULPicker.prototype.getSelectedText = function () {\r\n        var self = this;\r\n        return (self.items[self.getSelectedIndex()] || {}).text;\r\n    };\r\n\r\n    ULPicker.prototype.setSelectedValue = function (value, duration, callback) {\r\n        var self = this;\r\n        for (var index in self.items) {\r\n            var item = self.items[index];\r\n            if (item.value == value) {\r\n                self.setSelectedIndex(index, duration, callback);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n\r\n export default ulpicker = function (uls,options) {\r\n            //遍历选择的元素\r\n            uls.each(function (i, element) {\r\n                if (element.ulpicker) return;\r\n                if (options) {\r\n                    element.ulpicker = new ULPicker(element, options);\r\n                } else {\r\n                    var optionsText = element.getAttribute('data-ulpicker-options');\r\n                    var _options = optionsText ? JSON.parse(optionsText) : {};\r\n                    element.ulpicker = new ULPicker(element, _options);\r\n                }\r\n            });\r\n            return uls[0] ? uls[0].ulpicker : null;\r\n        };\r\n","var Class = function () {};\r\nClass.extend = function (prop) {\r\n    var _super = this.prototype;\r\n    initializing = true;\r\n    var prototype = new this();\r\n    initializing = false;\r\n    for (var name in prop) {\r\n        prototype[name] = typeof prop[name] == \"function\" &&\r\n            typeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\r\n            (function (name, fn) {\r\n                return function () {\r\n                    var tmp = this._super;\r\n\r\n                    this._super = _super[name];\r\n\r\n                    var ret = fn.apply(this, arguments);\r\n                    this._super = tmp;\r\n\r\n                    return ret;\r\n                };\r\n            })(name, prop[name]) :\r\n            prop[name];\r\n    }\r\n\r\n    function Class() {\r\n        if (!initializing && this.init)\r\n            this.init.apply(this, arguments);\r\n    }\r\n    Class.prototype = prototype;\r\n    Class.prototype.constructor = Class;\r\n    Class.extend = arguments.callee;\r\n    return Class;\r\n};\r\nexport default Class;","export var CLASS_POPOVER = 'mui-popover';\r\nexport var CLASS_POPOVER_ARROW = 'mui-popover-arrow';\r\nexport var CLASS_ACTION_POPOVER = 'mui-popover-action';\r\nexport var CLASS_BACKDROP = 'mui-backdrop';\r\nexport var CLASS_BAR_POPOVER = 'mui-bar-popover';\r\nexport var CLASS_BAR_BACKDROP = 'mui-bar-backdrop';\r\nexport var CLASS_ACTION_BACKDROP = 'mui-backdrop-action';\r\nexport var CLASS_ACTIVE = 'mui-active';\r\nexport var CLASS_BOTTOM = 'mui-bottom';\r\n\r\nvar isTouchable, EVENT_START, EVENT_MOVE, EVENT_END;\r\nif ('ontouchstart' in window) {\r\n    isTouchable = true;\r\n    EVENT_START = 'touchstart';\r\n    EVENT_MOVE = 'touchmove';\r\n    EVENT_END = 'touchend';\r\n} else {\r\n    isTouchable = false;\r\n    EVENT_START = 'mousedown';\r\n    EVENT_MOVE = 'mousemove';\r\n    EVENT_END = 'mouseup';\r\n}\r\nexport {\r\n    isTouchable,\r\n    EVENT_START,\r\n    EVENT_MOVE,\r\n    EVENT_END\r\n};\r\nexport var EVENT_CANCEL = 'touchcancel';\r\nexport var EVENT_CLICK = 'click';","import * as consts from './constants';\r\nimport * as events from './events';\r\nimport * as utils from './util';\r\nexport default createMask = function(callback) {\r\n    var element = document.createElement('div');\r\n    element.classList.add(consts.CLASS_BACKDROP);\r\n    element.addEventListener(consts.EVENT_MOVE, events.preventDefault);\r\n    element.addEventListener('tap', function() {\r\n        mask.close();\r\n    });\r\n    var mask = [element];\r\n    mask._show = false;\r\n    mask.show = function() {\r\n        mask._show = true;\r\n        element.setAttribute('style', 'opacity:1');\r\n        document.body.appendChild(element);\r\n        return mask;\r\n    };\r\n    mask._remove = function() {\r\n        if (mask._show) {\r\n            mask._show = false;\r\n            element.setAttribute('style', 'opacity:0');\r\n            utils.later(function() {\r\n                var body = document.body;\r\n                element.parentNode === body && body.removeChild(element);\r\n            }, 350);\r\n        }\r\n        return mask;\r\n    };\r\n    mask.close = function() {\r\n        if (callback) {\r\n            if (callback() !== false) {\r\n                mask._remove();\r\n            }\r\n        } else {\r\n            mask._remove();\r\n        }\r\n    };\r\n    return mask;\r\n};","export default dom = function (str) {\r\n    if (typeof(str) !== 'string') {\r\n        if ((str instanceof Array) || (str[0] && str.length)) {\r\n            return [].slice.call(str);\r\n        } else {\r\n            return [str];\r\n        }\r\n    }\r\n    if (!__create_dom_div__) {\r\n        __create_dom_div__ = document.createElement('div');\r\n    }\r\n    __create_dom_div__.innerHTML = str;\r\n    return [].slice.call(__create_dom_div__.childNodes);\r\n};","export var preventDefault = function (e) {\r\n    e.preventDefault();\r\n};\r\n/**\r\n * trigger event\r\n * @param {type} element\r\n * @param {type} eventType\r\n * @param {type} eventData\r\n * @returns {_L8.$}\r\n */\r\nexport var trigger = function (element, eventType, eventData) {\r\n    element.dispatchEvent(new CustomEvent(eventType, {\r\n        detail: eventData,\r\n        bubbles: true,\r\n        cancelable: true\r\n    }));\r\n    return this;\r\n};\r\n","/**\r\n * mui isArray\r\n */\r\nexport var isArray = Array.isArray ||\r\n    function (object) {\r\n        return object instanceof Array;\r\n    };\r\n/**\r\n * setTimeout封装\r\n * @param {Object} fn\r\n * @param {Object} when\r\n * @param {Object} context\r\n * @param {Object} data\r\n */\r\nexport var later = function (fn, when, context, data) {\r\n    when = when || 0;\r\n    var m = fn;\r\n    var d = data;\r\n    var f;\r\n    var r;\r\n\r\n    if (typeof fn === 'string') {\r\n        m = context[fn];\r\n    }\r\n\r\n    f = function () {\r\n        m.apply(context, isArray(d) ? d : [d]);\r\n    };\r\n\r\n    r = setTimeout(f, when);\r\n\r\n    return {\r\n        id: r,\r\n        cancel: function () {\r\n            clearTimeout(r);\r\n        }\r\n    };\r\n};\r\n"]}