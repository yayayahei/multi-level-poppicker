!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n=function(e){if("string"!=typeof e)return e instanceof Array||e[0]&&e.length?[].slice.call(e):[e];let t=null;return t||(t=document.createElement("div")),t.innerHTML=e,[].slice.call(t.childNodes)},s=!1,r=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,o=function(){};o.extend=function(e){var t=this.prototype;s=!0;var i=new this;for(var n in s=!1,e)i[n]="function"==typeof e[n]&&"function"==typeof t[n]&&r.test(e[n])?function(e,i){return function(){var n=this._super;this._super=t[e];var s=i.apply(this,arguments);return this._super=n,s}}(n,e[n]):e[n];function o(){!s&&this.init&&this.init.apply(this,arguments)}return o.prototype=i,o.prototype.constructor=o,o.extend=arguments.callee,o};var a,l,c;"ontouchstart"in window?(!0,a="touchstart",l="touchmove",c="touchend"):(!1,a="mousedown",l="mousemove",c="mouseup");var d=function(e){e.preventDefault()},p=function(e,t,i){return e.dispatchEvent(new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0})),this},h=Array.isArray||function(e){return e instanceof Array},u=function(e){var t=document.createElement("div");t.classList.add("mui-backdrop"),t.addEventListener(l,d),t.addEventListener("tap",function(){i.close()});var i=[t];return i._show=!1,i.show=function(){return i._show=!0,t.setAttribute("style","opacity:1"),document.body.appendChild(t),i},i._remove=function(){return i._show&&(i._show=!1,t.setAttribute("style","opacity:0"),function(e,t,i,n){t=t||0;var s,r=e,o=n;"string"==typeof e&&(r=i[e]),s=setTimeout(function(){r.apply(i,h(o)?o:[o])},t)}(function(){var e=document.body;t.parentNode===e&&e.removeChild(t)},350)),i},i.close=function(){e?!1!==e()&&i._remove():i._remove()},i},v=navigator.platform.toLowerCase(),m=navigator.userAgent.toLowerCase(),f=((m.indexOf("iphone")>-1||m.indexOf("ipad")>-1||m.indexOf("ipod")>-1)&&(v.indexOf("iphone")>-1||v.indexOf("ipad")>-1||v.indexOf("ipod")),function(e,t){this.holder=e,this.options=t||{},this.bscroll=new BScroll(this.holder.querySelector(".wrapper"),{bindToWrapper:!0}),this.init(),this.initInertiaParams(),this.calcElementItemPostion(!0),this.bindEvent()});f.prototype.findElementItems=function(){return this.elementItems=[].slice.call(this.holder.querySelectorAll("li")),this.elementItems},f.prototype.init=function(){this.list=this.holder.querySelector("ul"),this.findElementItems(),this.height=this.holder.offsetHeight,this.r=this.height/2-10,this.d=2*this.r,this.itemHeight=this.elementItems.length>0?this.elementItems[0].offsetHeight:40,this.itemAngle=parseInt(this.calcAngle(.8*this.itemHeight)),this.hightlightRange=this.itemAngle/2,this.visibleRange=90,this.beginAngle=0,this.beginExceed=this.beginAngle-30},f.prototype.calcElementItemPostion=function(e){var t=this;e&&(t.items=[]),t.elementItems.forEach(function(i){var n=t.elementItems.indexOf(i);if(t.endAngle=t.itemAngle*n,e){var s={};s.text=i.innerHTML||"",s.value=i.getAttribute("data-value")||s.text,t.items.push(s)}}),t.endExceed=t.endAngle+30},f.prototype.calcAngle=function(e){var t=b=parseFloat(this.r);e=Math.abs(e);var i=180*parseInt(e/this.d);e%=this.d;var n=(t*t+b*b-e*e)/(2*t*b);return i+function(e){return e/(Math.PI/180)}(Math.acos(n))},f.prototype.calcElementItemVisibility=function(e){var t=this;t.elementItems.forEach(function(i){var n=Math.abs(i.angle-e);n<t.hightlightRange?i.classList.add("highlight"):n<t.visibleRange?(i.classList.add("visible"),i.classList.remove("highlight")):(i.classList.remove("highlight"),i.classList.remove("visible"))})},f.prototype.setAngle=function(e){this.list.angle=e,this.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+e+"deg)",this.calcElementItemVisibility(e)},f.prototype.bindEvent=function(){var e=this;e.holder.addEventListener(a,function(e){},!1),e.holder.addEventListener(c,function(e){},!1),e.holder.addEventListener("touchcancel",function(e){},!1),e.holder.addEventListener(l,function(e){},!1),e.list.addEventListener("tap",function(t){var i="LI"===t.target.tagName?t.target:t.target.parentElement;if(i){e.elementItems.forEach(function(e){e.classList.remove("choose")}),i.classList.add("choose");var n=e.elementItems.indexOf(i);e.setSelectedIndex(n,200)}},!1)},f.prototype.initInertiaParams=function(){this.lastMoveTime=0,this.lastMoveStart=0,this.stopInertiaMove=!1},f.prototype.updateInertiaParams=function(e,t){var i=e.changedTouches?e.changedTouches[0]:e;if(t)this.lastMoveStart=i.pageY,this.lastMoveTime=e.timeStamp||Date.now(),this.startAngle=this.list.angle;else{var n=e.timeStamp||Date.now();this.lastMoveTime=n,this.lastMoveStart=i.pageY}this.stopInertiaMove=!0},f.prototype.startInertiaScroll=function(e){var t=e.changedTouches?e.changedTouches[0]:e,i=e.timeStamp||Date.now(),n=(t.pageY-this.lastMoveStart)/(i-this.lastMoveTime),s=n>0?-1:1,r=.2*s*-1,o=Math.abs(n/r),a=n*o/2;this.list.scrollTop-=a;var l=this.list.angle,c=this.calcAngle(a)*s,d=c;l+c<this.beginExceed&&(o=o*((c=this.beginExceed-l)/d)*.6),l+c>this.endExceed&&(o=o*((c=this.endExceed-l)/d)*.6),0!=c?this.scrollDistAngle(i,l,c,o):this.endScroll()},f.prototype.scrollDistAngle=function(e,t,i,n){var s=this;s.stopInertiaMove=!1,function(e,t,i,n){var r=n/13,o=0;!function e(){if(!s.stopInertiaMove){var n=s.quartEaseOut(o,t,i,r);s.setAngle(n),++o>r-1||n<s.beginExceed||n>s.endExceed?s.endScroll():setTimeout(e,13)}}()}(0,t,i,n)},f.prototype.quartEaseOut=function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},f.prototype.endScroll=function(){if(this.list.angle<this.beginAngle)this.list.style.webkitTransition="150ms ease-out",this.setAngle(this.beginAngle);else if(this.list.angle>this.endAngle)this.list.style.webkitTransition="150ms ease-out",this.setAngle(this.endAngle);else{var e=parseInt((this.list.angle/this.itemAngle).toFixed(0));this.list.style.webkitTransition="100ms ease-out",this.setAngle(this.itemAngle*e)}this.triggerChange()},f.prototype.triggerChange=function(e){var t=this;setTimeout(function(){var i=t.getSelectedIndex(),n=t.items[i];(p||!0===e)&&p(t.holder,"change",{index:i,item:n}),t.lastIndex=i,"function"==typeof e&&e()},0)},f.prototype.correctAngle=function(e){return e<this.beginAngle?this.beginAngle:e>this.endAngle?this.endAngle:e},f.prototype.setItems=function(e){this.items=e||[];var t=[];this.items.forEach(function(e){null!==e&&void 0!==e&&t.push("<li><span>"+(e.text||e)+"</span><i></i></li>")}),this.list.innerHTML=t.join(""),this.findElementItems(),this.calcElementItemPostion(),this.setAngle(this.correctAngle(this.list.angle)),this.triggerChange(!0)},f.prototype.getItems=function(){return this.items},f.prototype.getSelectedIndex=function(){return this.index},f.prototype.setSelectedIndex=function(e,t,i){this.index=e,this.triggerChange(i)},f.prototype.getSelectedItem=function(){return this.items[this.getSelectedIndex()]},f.prototype.getSelectedValue=function(){return(this.items[this.getSelectedIndex()]||{}).value},f.prototype.getSelectedText=function(){return(this.items[this.getSelectedIndex()]||{}).text},f.prototype.setSelectedValue=function(e,t,i){for(var n in this.items){if(this.items[n].value==e)return void this.setSelectedIndex(n,t,i)}};var g=function(e,t){console.log(e)},y='<div class="mui-poppicker">\t\t<div class="mui-poppicker-header">\t\t    <span class="mui-poppicker-header-text"></span>\t\t   <div class="mui-poppicker-btn-close"><span class=" icon fa fa-times " style="font-size: 16px;"></span></div>\t\t</div>\t\t<div class="mui-poppicker-body">\t\t<div class="mui-poppicker-nav">\t\t<div class="mui-poppicker-title"></div>\t\t</div>\t\t</div>\t</div>',x='<h5 data-id="title"></h5>',E='<div class="mui-ulpicker">\t\t<div class="mui-ulpicker-inner">            <div class="wrapper">                <ul class="content mui-ulpicker-list">                </ul>            </div>        </div>\t</div>';var k=class{constructor(e){var t=this;t.options=e||{},t.options.panelTitle=t.options.panelTitle||"",t.panel=n(y)[0],document.body.appendChild(t.panel),t.headerText=t.panel.querySelector(".mui-poppicker-header-text"),t.headerText.innerText=t.options.panelTitle,t.close=t.panel.querySelector(".mui-poppicker-btn-close"),t.title=t.panel.querySelector(".mui-poppicker-title"),t.body=t.panel.querySelector(".mui-poppicker-body"),t.mask=u(),t.close.addEventListener("tap",function(e){t.hide()},!1),t.mask[0].addEventListener("tap",function(){t.hide()},!1),t._createPicker(),t.panel.addEventListener(a,function(e){e.preventDefault()},!1),t.panel.addEventListener(l,function(e){e.preventDefault()},!1)}_createPicker(){var e=this,t=e.options.layer||1,i=e.options.titleWidthLayer,s=e.options.defaultTitles||Array(t).fill("请选择");e.pickers=[],e.titles=[],e.pickerElements=[];for(var r=1;r<=t;r++){var o=n(E)[0];o.setAttribute("data-id",r),o.style.width="100%";var a=n(x)[0];a.innerText=s[r-1],a.setAttribute("data-id",r),i&&(a.style.width=i[r-1]+"%"),1===r&&(a.classList.add("active"),o.classList.add("active")),a.addEventListener("tap",function(i){for(var n=Number(this.getAttribute("data-id")),s=(Number(this.getAttribute("data-value")),this.previousSibling&&Number(this.previousSibling.getAttribute("data-value")),0);s<t;s++)s+1===n?(e.pickerElements[s].classList.add("active"),e.pickers[s].bscroll.refresh(),e.pickers[s].bscroll.scrollToElement(".choose"),e.titles[s].classList.add("active")):(e.pickerElements[s].classList.remove("active"),e.titles[s].classList.remove("active"))},!1),e.title.appendChild(a),e.titles.push(a),e.pickerElements.push(o),e.body.appendChild(o);var l=g(o);e.pickers.push(l),o.addEventListener("change",function(i){var n=Number(this.getAttribute("data-id")),r=i.detail||{},o=r.item||{},a=e.titles[n-1];a.innerText=o.text||s[n-1],a.setAttribute("data-value",r.index);var l=this.nextSibling;if(l&&l.ulpicker){if(l.ulpicker.setItems(o.children),l.ulpicker.setSelectedIndex(-1),r.index>-1)for(var c=0;c<t;c++)c===n?(e.pickerElements[c].classList.add("active"),e.titles[c].classList.add("active"),e.pickers[c].bscroll.refresh()):(e.pickerElements[c].classList.remove("active"),e.titles[c].classList.remove("active"))}else r.index>-1&&e.callback&&!1!==e.callback(e.getSelectedItems())&&e.hide()},!1)}}setData(e){e=e||[],console.log(this.pickers[0]),this.pickers[0].setItems(e)}getSelectedItems(){var e=[];for(var t in this.pickers){var i=this.pickers[t];e.push(i.getSelectedItem()||{})}return e}show(e){this.callback=e,this.mask.show(),document.body.classList.add("poppicker-active-for-page"),document.documentElement.classList.add("poppicker-active-for-page"),this.panel.classList.add("active")}hide(){this.disposed||(this.panel.classList.remove("active"),this.mask.close(),document.body.classList.remove("poppicker-active-for-page"),document.documentElement.classList.remove("poppicker-active-for-page"))}dispose(){var e=this;e.hide(),setTimeout(function(){for(var t in e.panel.parentNode.removeChild(e.panel),e)e[t]=null,delete e[t];e.disposed=!0},300)}};fetch("./dist/data.json").then(function(e){return e.json()}).then(function(e){console.log(e);var t=new k({panelTitle:"自定义标题",layer:3,titleWidthLayer:[20,20,55],defaultTitles:["省份","城市","请选择"]});t.setData(e),document.getElementById("pop").onclick=function(e){t.show(function(e){e.map(function(e){return e.text}).join(" ")})},document.getElementById("pop").click()})}]);